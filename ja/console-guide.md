## Content Delivery > CDN > コンソール使用ガイド

この文書はNHN Cloud CDNコンソールでCDNサービスを構成して利用する方法を説明します。

## CDNサービス作成

**Contents Delivery > CDNのCDNサービス**タブで**作成**ボタンをクリックすると、**CDNサービス作成**ダイアログボックスが表示されます。
CDNサービスドメインは**[サービスID].toastcdn.net**の形式で自動作成されます。所有しているドメインをサービスドメインで利用するには、**ドメインエイリアス**(Domain Alias)機能を利用できます。
作成をリクエストした後、サービスの配布が完了するまで最大2時間かかります。配布が完了した後、サービスを利用できます。

> **[参考] CDN最初作成時、ダウンロード最適化所要期間**
> CDNを初めて作成した後、最大3日間はダウンロード速度が多少遅くなる場合があります。

### 基本情報
基本情報を設定します。
![CDNサービス作成-基本情報](https://static.toastoven.net/prod_cdn/v2/console-cdn-create-default2_202112.png)

- **サービス地域**
  GLOBALサービス地域は、全世界の拠点にあるCDNエッジサーバーを通してCDNサービスを提供します。
 ただし、**中国とロシア**はサービス地域から除外されます。

- **説明**
  CDNサービスの説明を追加します。

- **ドメインエイリアス**
  TOSAT CDNは基本的に**[サービスID].toastcdn.net**形式のサービスドメインアドレスを提供しています。
 基本サービスドメインアドレスではない所有ドメインでCDNサービスを利用するには**ドメインエイリアス**で設定してください。
 所有しているドメインでHTTPSプロトコルサービスを利用するには、まず**証明書管理**タブで証明書を発行した後、ドメインエイリアスを設定してください。
 ドメインエイリアスを設定した後は、ドメインのDNSサービス提供業者で、次のようにCNAMEレコードを登録する必要があります。DNS設定関連はDNSサービス提供業者にお問い合わせください。
    - レコードタイプ：**CNAME**
    - レコード名：**[ドメインエイリアスに登録したドメイン]**
    - レコード値(Rdata)：**[サービスID].toastcdn.net**
    - TTL：任意の値

- **コールバック**
  CDNサービス作成と変更作業(修正、一時停止/再開、削除)は数時間かかります。
 作業が完了した後、設定したコールバックURLに変更状態とCDN設定情報を受け取るにはコールバックを設定してください。コールバックで伝達される情報は[APIガイド文書](./api-guide-v2.0/#_23)を参照してください。
    1. **HTTP Method**と**コールバックURL**を入力します。
    2. Query ParameterにCDNサービス変更作業の結果を受け取るには、**コールバックURL**に次のパス(path)変数を含めて入力してください。 
        例：http://callback.url?appKey={appKey}&status={status}&isSuccessful={isSuccessful})

| パス(path)変数 | 説明 | サンプル伝達値 |
| ------------- | --- | ------- |
| {appKey} | CDNサービスのアプリキー | コンソールで発行したアプリキー |
| {domain} | CDNサービス名 | [サービスID].toastcdn.net |
| {status} | 現在のCDNサービスの状態 | OPEN、SUSPEND、CLOSE、ERROR |
| {isSuccessful} | サービス変更作業が成功したか(API v1.0はサポートしません) | "true"または"false" |

### オリジンサーバー
CDNサービスへ配布する原本ファイルを提供するサーバーを設定します。
![CDNサービス作成-基本情報](https://static.toastoven.net/prod_cdn/v2/console-cdn-create-origin2_202112.png)

- **原本タイプ**
    - オブジェクトストレージ：NHN Cloud Object Storageサービスで作成したコンテナをオリジンサーバーに設定します。
        - リージョン：オブジェクトストレージのコンテナ情報を照会するリージョンを選択します。
        - 名前：オリジンサーバーに設定するコンテナの名前を入力します。コンテナアクセスポリシーが**PUBLIC**のコンテナのみをオリジンサーバーとして使用できます。コンテナがオリジンサーバーとして使用可能な場合、オリジンサーバーとソースパスにコンテナ情報が自動的に入力されます。
    - インスタンス：NHN Cloud Instanceサービスで作成したインスタンスをオリジンサーバーに設定します。
        - リージョン：インスタンスリストを照会するリージョンを選択します。
        - インスタンス：リージョンを選択して、照会されたインスタンスリストからオリジンサーバーに設定するインスタンスを選択します。選択したインスタンスのIPがオリジンサーバーに自動的に入力され、使用するオリジンサーバーのポートは直接入力する必要があります。 Floating IPが接続されたインスタンスのみをオリジンサーバーとして使用できます。
    - 直接入力：別途運営中のオリジンサーバーを設定します。

- **オリジンサーバー**
オリジンサーバーはCDNサービスへ配布する原本ファイルを提供するサーバーです。オリジンサーバーはIPv4または完全修飾ドメイン名(FQDN、fully qualified domain name)形式で入力できます。IPアドレスは変更される可能性が高いため、ドメインで設定することを推奨します。 
 運用中のオリジンサーバーがない場合は、**オリジナルタイプ**の**インスタンス**オプションを選択してNHN Cloud Instanceサービスのインスタンスを使用するか、**オブジェクトストレージ**オプションを選択してNHN Cloud Object Storageサービスのコンテナを利用してください。
  CDNサービスドメインでHTTPS転送をサポートするには、オリジンサーバーがHTTPSレスポンスをサポートする必要があります。 
これはオリジンサーバーにNHN Cloud CDNが信頼する証明書のインストールが必要であることを意味します。 
